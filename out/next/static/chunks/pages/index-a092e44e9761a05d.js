(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(5945)}])},5945:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var n=a(5893),s=a(7294),i=a(6467),l=a.n(i),o=a(2339),r=a(5093),d=a(1163);let c=e=>{let{imageUrl:t}=e,a=async()=>{try{let e=await fetch(t),a=await e.blob(),n=window.URL.createObjectURL(new Blob([a])),s=document.createElement("a");s.href=n,s.setAttribute("download","background_removed_image.png"),document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(e){console.error("Error downloading image:",e)}};return(0,n.jsx)("button",{className:l().downloadButton,onClick:a,children:"Download Result"})};var u=a(2489),_=a(9417),p=a(3454);let m=e=>new Promise(t=>setTimeout(t,e)),g=(0,r.Uploader)({apiKey:p.env.NEXT_PUBLIC_UPLOAD_API_TOKEN?p.env.NEXT_PUBLIC_UPLOAD_API_TOKEN:"free"}),v={apiKey:"free",maxFileCount:1},h=e=>{var t,a,i;let{navigateToPage:r}=e,[p,h]=(0,s.useState)(!1),[w,f]=(0,s.useState)(null),[N,P]=(0,s.useState)(null),[j,x]=(0,s.useState)(null),[k,b]=(0,s.useState)(null),[T,y]=(0,s.useState)(!1),[C,S]=(0,s.useState)(void 0),[U,O]=(0,s.useState)(!1),[B,E]=(0,s.useState)(!0),[R,I]=(0,s.useState)(""),[F,L]=(0,s.useState)(0),[A,D]=(0,s.useState)(!1),[K,X]=(0,s.useState)(null);(0,d.useRouter)(),(0,s.useEffect)(()=>{(()=>{let e=localStorage.getItem("apiToken");e&&I(e)})()},[]),(0,s.useEffect)(()=>{chrome.storage.sync.get(["ratingClicked"],e=>{e.ratingClicked&&(D(e.ratingClicked),E(!1))})},[]);let V=async e=>{var t,a,n,s;let i=Date.now();S(void 0),h(!1),console.log(R);let l=await fetch("https://mama-api.vercel.app/api/predictions/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiToken:R,imageUrl:e})}),o=await l.json();if(200!==l.status){f(o.message),y(!1);return}for(y(!0),b(o);(null==o?void 0:null===(t=o.prediction)||void 0===t?void 0:t.status)!=="succeeded";){await m(1e4);let e=await fetch("https://mama-api.vercel.app/api/predictions/"+o.prediction.id,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiToken:R})});b(o=await e.json())}(null==o?void 0:null===(a=o.prediction)||void 0===a?void 0:a.status)==="failed"&&f("error occured"),((null==o?void 0:null===(n=o.prediction)||void 0===n?void 0:n.status)==="succeeded"||(null==o?void 0:null===(s=o.prediction)||void 0===s?void 0:s.status)==="failed")&&y(!1);let r=Date.now();S((r-i)/1e3),b(o),y(!1)},z=e=>{L(e),D(!0),E(!1),chrome.storage.sync.set({ratingClicked:!0},()=>{}),e>=4?window.open("https://www.google.com","_blank"):window.open("https://www.youtube.com/hashtag/funnyvideo","_blank")};return(0,n.jsx)("div",{className:l().container,children:(0,n.jsxs)("main",{className:l().main,children:[!k&&(0,n.jsx)("h1",{className:l().title,children:"Background Remover"}),!k&&(0,n.jsx)("p",{className:l().description,children:"AI-powered tool to remove the background from any image!"}),!k&&(0,n.jsxs)("div",{className:l().steps,children:[(0,n.jsx)("p",{className:l().step,children:"1. Insert your Replicate API Token by clicking ⚙️."}),(0,n.jsx)("p",{className:l().step,children:'2. Click the "Click to remove" button to upload an image.'}),(0,n.jsx)("p",{className:l().step,children:"3. Confirm the upload and wait for the result."})]}),!k&&(0,n.jsx)(o.UploadButton,{uploader:g,options:v,onComplete:e=>{0!==e.length&&(P(e[0].originalFile.originalFileName),x(e[0].fileUrl.replace("raw","thumbnail")),V(e[0].fileUrl.replace("raw","thumbnail")))},children:e=>{let{onClick:t}=e;return(0,n.jsx)("button",{className:l().uploadButton,onClick:t,disabled:p,children:p?"Uploading...":"click to remove"})}}),T&&(0,n.jsx)("div",{className:l().loadingOverlay,children:(0,n.jsx)("div",{className:l().spinner})}),w&&(0,n.jsx)("div",{className:l().error,children:w}),(null==k?void 0:null===(t=k.prediction)||void 0===t?void 0:t.output)&&(0,n.jsxs)("div",{className:l().resultContainer,children:[(0,n.jsx)("h2",{className:l().resultTitle,children:"Result:"}),(0,n.jsx)("img",{src:null==k?void 0:null===(a=k.prediction)||void 0===a?void 0:a.output,alt:"Background Removed",className:l().resultImage}),(0,n.jsx)("button",{className:l().fullScreenButton,onClick:()=>{var e;return window.open(null==k?void 0:null===(e=k.prediction)||void 0===e?void 0:e.output,"_blank")},children:"View Full Screen"}),(0,n.jsx)(c,{imageUrl:null==k?void 0:null===(i=k.prediction)||void 0===i?void 0:i.output})]}),!A&&!k&&(0,n.jsxs)("div",{className:l().rateUs,children:[(0,n.jsx)("h2",{className:l().rateUsTitle,children:"Rate Us:"}),(0,n.jsx)("div",{className:l().stars,children:[1,2,3,4,5].map(e=>(0,n.jsx)("span",{onClick:()=>z(e),onMouseEnter:()=>X(e),onMouseLeave:()=>X(null),className:"".concat(l().star," ").concat(e>K?l().active:""),children:(0,n.jsx)(u.G,{icon:_.Tab})},e))})]})]})})};function w(){let[e,t]=(0,s.useState)("index"),a=e=>{t(e)};return(0,n.jsx)(n.Fragment,{children:"index"===e&&(0,n.jsx)(h,{navigateToPage:a})})}},6467:function(e){e.exports={container:"Pages_container__SbWhT",main:"Pages_main__5_Vsf",title:"Pages_title__5_zk8",description:"Pages_description__Vsj9E",steps:"Pages_steps__ejOQO",step:"Pages_step__NP1Cd",code:"Pages_code__vzNOX",rateUs:"Pages_rateUs__a0VgZ",rateUsTitle:"Pages_rateUsTitle__y_FNp",stars:"Pages_stars__SLMR1",star:"Pages_star__m7e3F",active:"Pages_active__UUgqN",uploadButton:"Pages_uploadButton__wyTj8",resultContainer:"Pages_resultContainer__Tdd_c",resultTitle:"Pages_resultTitle___c8th",resultImage:"Pages_resultImage__YR_Hf",fullScreenButton:"Pages_fullScreenButton__n01qB",downloadButton:"Pages_downloadButton__dfF9w",loadingOverlay:"Pages_loadingOverlay__RF6H1",spinner:"Pages_spinner__eK0oO",spin:"Pages_spin__Dz3rY"}}},function(e){e.O(0,[976,510,883,461,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);