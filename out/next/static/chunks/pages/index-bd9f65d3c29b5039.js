(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5945)}])},5945:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return p}});var s=t(5893),n=t(7294),i=t(6467),l=t.n(i);let o=e=>{let{imageUrl:a}=e,t=async()=>{try{let e=await fetch(a),t=await e.blob(),s=window.URL.createObjectURL(new Blob([t])),n=document.createElement("a");n.href=s,n.setAttribute("download","background_removed_image.png"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(e){console.error("Error downloading image:",e)}};return(0,s.jsx)("button",{className:l().downloadButton,onClick:t,children:"Download Result"})};var r=t(2489),c=t(9417);let d=e=>new Promise(a=>setTimeout(a,e)),u=e=>{var a,t,i;let{navigateToPage:u}=e,[p,_]=(0,n.useState)(!1),[g,m]=(0,n.useState)(null),[h,v]=(0,n.useState)(null),[f,j]=(0,n.useState)(null),[w,P]=(0,n.useState)(null),[x,y]=(0,n.useState)(!1),[N,k]=(0,n.useState)(void 0),[b,S]=(0,n.useState)(!1),[T,U]=(0,n.useState)(!0),[C,O]=(0,n.useState)(""),[B,D]=(0,n.useState)(0),[R,E]=(0,n.useState)(!1),[I,F]=(0,n.useState)(null),A=(0,n.useRef)(null);(0,n.useEffect)(()=>{(()=>{let e=localStorage.getItem("apiToken");e&&O(e)})()},[]),(0,n.useEffect)(()=>{chrome.storage.sync.get(["ratingClicked"],e=>{e.ratingClicked&&(E(e.ratingClicked),U(!1))})},[]);let z=async e=>{var a,t,s,n;let i=Date.now();k(void 0),_(!1);let l=await fetch("https://mama-api.vercel.app/api/predictions/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C?{apiToken:C,imageUrl:e}:{imageUrl:e})}),o=await l.json();if(200!==l.status){m(o.message),y(!1);return}for(y(!0),P(o);(null==o?void 0:null===(a=o.prediction)||void 0===a?void 0:a.status)!=="succeeded";){await d(1e4);let e=C?{apiToken:C}:{},a=await fetch("https://mama-api.vercel.app/api/predictions/"+o.prediction.id,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});P(o=await a.json())}(null==o?void 0:null===(t=o.prediction)||void 0===t?void 0:t.status)==="failed"&&m("An error occurred"),((null==o?void 0:null===(s=o.prediction)||void 0===s?void 0:s.status)==="succeeded"||(null==o?void 0:null===(n=o.prediction)||void 0===n?void 0:n.status)==="failed")&&y(!1);let r=Date.now();k((r-i)/1e3),P(o),y(!1)},L=async e=>{if(!e.type.startsWith("image/")){m("Only image files are allowed.");return}if(e.size>67108864){m("File size exceeds ".concat(64,"MB."));return}_(!0),m(null);let a=new FormData;a.append("image",e);try{let t=await fetch("https://mama-api.vercel.app/api/image",{method:"POST",body:a}),s=await t.json();t.ok&&s.imageUrl?(v(e.name),j(s.imageUrl),z(s.imageUrl)):(m("Failed to upload image."),_(!1))}catch(e){m("Failed to upload image."),_(!1)}},M=e=>{e.preventDefault();let a=e.dataTransfer.files[0];a&&L(a)},V=e=>{e.preventDefault()},K=e=>{D(e),E(!0),U(!1),chrome.storage.sync.set({ratingClicked:!0},()=>{}),e>=4?chrome.tabs.create({url:"https://www.google.com"}):chrome.tabs.create({url:"https://www.youtube.com/hashtag/funnyvideo"})};return(0,s.jsx)("div",{className:l().container,children:(0,s.jsxs)("main",{className:l().main,children:[!w&&(0,s.jsx)("h1",{className:l().title,children:"Background Remover"}),!w&&(0,s.jsx)("p",{className:l().description,children:"AI-powered tool to remove the background from any image!"}),!w&&(0,s.jsxs)("div",{className:l().steps,children:[(0,s.jsx)("p",{className:l().step,children:"1. Insert your Replicate API Token by clicking ⚙️."}),(0,s.jsx)("p",{className:l().step,children:"2. Upload Image and wait for the result."})]}),!w&&(0,s.jsxs)("div",{className:l().dropArea,onDrop:M,onDragOver:V,onClick:()=>A.current.click(),children:[(0,s.jsx)("button",{className:l().uploadButton,disabled:p,children:p?"Uploading...":"Upload Image"}),(0,s.jsx)("p",{className:l().uploadP,children:"Drag & drop an image here, or click to select one"}),(0,s.jsx)("input",{type:"file",ref:A,style:{display:"none"},accept:"image/*",onChange:e=>L(e.target.files[0])})]}),x&&(0,s.jsx)("div",{className:l().loadingOverlay,children:(0,s.jsx)("div",{className:l().spinner})}),g&&(0,s.jsx)("div",{className:l().error,children:g}),(null==w?void 0:null===(a=w.prediction)||void 0===a?void 0:a.output)&&(0,s.jsxs)("div",{className:l().resultContainer,children:[(0,s.jsx)("h2",{className:l().resultTitle,children:"Result:"}),(0,s.jsx)("img",{src:null==w?void 0:null===(t=w.prediction)||void 0===t?void 0:t.output,alt:"Background Removed",className:l().resultImage}),(0,s.jsx)("button",{className:l().fullScreenButton,onClick:()=>{var e;return chrome.tabs.create({url:null==w?void 0:null===(e=w.prediction)||void 0===e?void 0:e.output})},children:"View Full Screen"}),(0,s.jsx)(o,{imageUrl:null==w?void 0:null===(i=w.prediction)||void 0===i?void 0:i.output}),(0,s.jsxs)("div",{onDrop:M,onDragOver:V,onClick:()=>A.current.click(),children:[(0,s.jsx)("button",{className:l().uploadButton2,disabled:p,children:p?"Uploading...":"Upload Image"}),(0,s.jsx)("input",{type:"file",ref:A,style:{display:"none"},accept:"image/*",onChange:e=>L(e.target.files[0])})]})]}),!R&&!w&&(0,s.jsxs)("div",{className:l().rateUs,children:[(0,s.jsx)("h2",{className:l().rateUsTitle,children:"Rate Us:"}),(0,s.jsx)("div",{className:l().stars,children:[1,2,3,4,5].map(e=>(0,s.jsx)("span",{onClick:()=>K(e),onMouseEnter:()=>F(e),onMouseLeave:()=>F(null),className:"".concat(l().star," ").concat(e>I?l().active:""),children:(0,s.jsx)(r.G,{icon:c.Tab})},e))})]})]})})};function p(){let[e,a]=(0,n.useState)("index"),t=e=>{a(e)};return(0,s.jsx)(s.Fragment,{children:"index"===e&&(0,s.jsx)(u,{navigateToPage:t})})}},6467:function(e){e.exports={container:"Pages_container__SbWhT",main:"Pages_main__5_Vsf",title:"Pages_title__5_zk8",description:"Pages_description__Vsj9E",steps:"Pages_steps__ejOQO",step:"Pages_step__NP1Cd",code:"Pages_code__vzNOX",rateUs:"Pages_rateUs__a0VgZ",rateUsTitle:"Pages_rateUsTitle__y_FNp",stars:"Pages_stars__SLMR1",star:"Pages_star__m7e3F",active:"Pages_active__UUgqN",uploadButton:"Pages_uploadButton__wyTj8",resultContainer:"Pages_resultContainer__Tdd_c",resultTitle:"Pages_resultTitle___c8th",resultImage:"Pages_resultImage__YR_Hf",fullScreenButton:"Pages_fullScreenButton__n01qB",error:"Pages_error__Un0IL",downloadButton:"Pages_downloadButton__dfF9w",loadingOverlay:"Pages_loadingOverlay__RF6H1",spinner:"Pages_spinner__eK0oO",spin:"Pages_spin__Dz3rY",dropArea:"Pages_dropArea__KZMnY",uploadButton2:"Pages_uploadButton2__Kfj0c",uploadP:"Pages_uploadP__A5BrO"}}},function(e){e.O(0,[976,603,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);